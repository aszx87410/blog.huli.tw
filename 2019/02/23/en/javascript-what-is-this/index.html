<!DOCTYPE html>
<html class="has-navbar-fixed-top" lang="en">
<head>
    <meta charset="utf-8">
<title>Understanding JavaScript&#39;s Number One Headache: this - Huli&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


<link href="https://blog.huli.tw/2019/02/23/en/javascript-what-is-this/" rel="alternate" hreflang="en" />


<link href="https://blog.huli.tw/2019/02/23/javascript-what-is-this/" rel="alternate" hreflang="x-default" />


            
<link href="https://blog.huli.tw/2019/02/23/javascript-what-is-this/" rel="alternate" hreflang="zh-TW" />
            





    
<link rel="canonical" href="https://blog.huli.tw/2019/02/23/en/javascript-what-is-this/">
    





    <meta name="description" content="IntroductionIn JavaScript, there is a topic that is very difficult for beginners and even experienced developers to fully understand: “What is this?”. As a front-end engineer who uses JavaScript as a">
<meta property="og:type" content="article">
<meta property="og:title" content="Understanding JavaScript&#39;s Number One Headache: this">
<meta property="og:url" content="https://blog.huli.tw/2019/02/23/en/javascript-what-is-this/index.html">
<meta property="og:site_name" content="Huli&#39;s blog">
<meta property="og:description" content="IntroductionIn JavaScript, there is a topic that is very difficult for beginners and even experienced developers to fully understand: “What is this?”. As a front-end engineer who uses JavaScript as a">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-02-23T13:10:00.000Z">
<meta property="article:modified_time" content="2023-06-20T05:10:49.065Z">
<meta property="article:author" content="Huli">
<meta property="article:tag" content="Front-end">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary_large_image">



<link rel="alternative" href="/atom.xml" title="Understanding JavaScript&#39;s Number One Headache: this" type="application/atom+xml">



<link rel="icon" href="/img/lidemy_logo.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">


<link rel="stylesheet" href="/css/bulma.css?v=2.css">



<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" />


<link rel="stylesheet" href="/css/style.css?v=4.css">





    
    
    
    
    
    
    
    
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1393J2EVCZ"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1393J2EVCZ');
</script>


    


<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <script>
        if (localStorage.getItem('dark-mode')) {
            if (localStorage.getItem('dark-mode') === 'true') {
                document.body.classList.add('dark-mode')
            }
        } else {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode')
            }
        }
    </script>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/en">
                
                    
                    Huli&#39;s blog
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/en/archives">Archive</a>
            
            <a class="navbar-item "
               href="/en/categories">Categories</a>
            
            <a class="navbar-item "
               href="/en/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    Table of Contents
                </a>
                <div class="navbar-dropdown">
                    
                    
                    
                    
                    <a class="navbar-item" href="#introduction">1&nbsp;&nbsp;<b>Introduction</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#to-talk-about-this-we-must-start-with-object-oriented-programming">2&nbsp;&nbsp;<b>To talk about this, we must start with object-oriented programming</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#not-much-meaning-of-this">3&nbsp;&nbsp;<b>Not much meaning of this</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#changing-the-value-of-this">4&nbsp;&nbsp;<b>Changing the value of this</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#this-in-objects">5&nbsp;&nbsp;<b>this in objects</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#non-conformist-arrow-functions">6&nbsp;&nbsp;<b>Non-conformist Arrow Functions</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#practical-application-react">7&nbsp;&nbsp;<b>Practical Application: React</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#summary">8&nbsp;&nbsp;<b>Summary</b></a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" target="_blank" title="Twitter" href="https://twitter.com/aszx87410">
                
                <i class="fab fa-twitter"></i>
                
            </a>
               
            <a class="navbar-item" target="_blank" title="RSS" href="/atom-en.xml">
                
                <i class="fas fa-rss"></i>
                
            </a>
               
            
            <a class="navbar-item btn-dark-mode" title="dark-mode" href="#">
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="15" height="15" viewBox="0 0 256 256" xml:space="preserve">
                    <defs>
                    </defs>
                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                        <path d="M 87.823 60.7 c -0.463 -0.423 -1.142 -0.506 -1.695 -0.214 c -15.834 8.398 -35.266 2.812 -44.232 -12.718 c -8.966 -15.53 -4.09 -35.149 11.101 -44.665 c 0.531 -0.332 0.796 -0.963 0.661 -1.574 c -0.134 -0.612 -0.638 -1.074 -1.259 -1.153 c -9.843 -1.265 -19.59 0.692 -28.193 5.66 C 13.8 12.041 6.356 21.743 3.246 33.35 S 1.732 57.08 7.741 67.487 c 6.008 10.407 15.709 17.851 27.316 20.961 C 38.933 89.486 42.866 90 46.774 90 c 7.795 0 15.489 -2.044 22.42 -6.046 c 8.601 -4.966 15.171 -12.43 18.997 -21.586 C 88.433 61.79 88.285 61.123 87.823 60.7 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: #ffa716; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                    </g>
                    </svg>
                </div>
            </a>
            
               <a class="navbar-item" href="/2019/02/23/javascript-what-is-this/">中文</a>
            
            

        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
      
      <div data-nosnippet class="self-notice">
        If you have any thoughts on my blog or articles and you want to let me know, you can either post a comment below(public) or tell me via this <a href="https://forms.gle/SjJZ4cnNs6NnjXQG8" target="_blank">feedback form</a>
      </div>
      
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Understanding JavaScript&#39;s Number One Headache: this
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-02-23T13:10:00.000Z" itemprop="datePublished">23 February 2019</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/en/categories/JavaScript/">JavaScript</a>
        </span>
        
        
        
        <spen data-nosnippet class="column is-narrow">(Translated by ChatGPT)</span>
        
    </div>
    
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h1><span id="introduction">Introduction</span></h1><p>In JavaScript, there is a topic that is very difficult for beginners and even experienced developers to fully understand: “What is this?”. As a front-end engineer who uses JavaScript as a tool for a living, I have been struggling with this issue for a long time.</p>
<p>I originally thought that I would never write an article about this.</p>
<p>There are two reasons for this. First, there are already a lot of articles explaining this topic, and each one is written very well. After reading the <a target="_blank" rel="noopener" href="https://kuro.tw/posts/2017/10/12/What-is-THIS-in-JavaScript-%E4%B8%8A/">What’s THIS in JavaScript ?</a> series, I felt that the explanation was very complete. If I am not confident that I can explain it more clearly or from a different perspective, it seems unnecessary to write another article. The second reason is that if you want to “completely” understand this, the cost may be much higher than you think.</p>
<span id="more"></span>

<p>Here, “completely” means that you can explain why the value of this is like this in any situation. Let me give you an example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token function-variable function">bar</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
<span class="token comment">//範例1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//範例2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//範例3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>bar <span class="token operator">=</span> foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//範例4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">||</span> foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//範例5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">,</span> foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Can you answer it? If not, it means that you don’t “completely” understand this. The reason why the cost of completely understanding this is very high is because “completely understanding this” means “memorizing the ECAMScript specification”. The value of this is not something we imagine out of thin air. In fact, there is a complete definition behind it, which is the so-called ECMAScript specification. You must first understand this specification before you can fully understand the object referred to by this in each situation.</p>
<p>If you really want to completely understand this, I recommend this article: <a target="_blank" rel="noopener" href="https://github.com/mqyqingfeng/Blog/issues/7">JavaScript深入之从ECMAScript规范解读this</a>. The example above is taken from this article. If you want to see the answer and understand why, you can read this article.</p>
<p>Since I mentioned so many reasons why I shouldn’t write about this earlier, why did I still jump in and write about it?</p>
<p>Because after reading so many articles and absorbing a lot of essence, I found that if there is a good entry point, this may not be so difficult to understand. With the method I teach in this article, you will not completely understand this. You may answer the five examples above incorrectly, but you can still solve the basic questions.</p>
<p>This is also the origin of the title: “Not completely complete, but guaranteed to be easy to understand”. The purpose of this article is to provide a different perspective on this, starting from why there is this, and then using a set of rules to explain the value of this, at least so that you no longer misunderstand this and know what this is in some common situations.</p>
<h1><span id="to-talk-about-this-we-must-start-with-object-oriented-programming">To talk about this, we must start with object-oriented programming</span></h1><p>(If you have no idea about object-oriented programming in JavaScript, you can first complete the relevant basics and read this article: <a target="_blank" rel="noopener" href="https://github.com/aszx87410/blog/issues/18">It’s time to understand JavaScript’s prototype chain</a>)</p>
<p>If you have written other programming languages, you know that this is never a difficult thing. It represents the instance itself in object-oriented programming.</p>
<p>Let me give you an example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span>
  <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">&#125;</span>
  
  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
<span class="token keyword">const</span> myCar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
myCar<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myCar<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// hello</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>In the above example, we declare a class <code>Car</code> and write two methods, <code>setName</code> and <code>getName</code>, using <code>this.name</code> to access the properties of this instance.</p>
<p>Why write like this? Because this is the only way, where else do you want to store the property <code>name</code>? There is no other place for you to store it. So the role of this is obvious here, and it refers to the instance itself.</p>
<p>In the above example, <code>myCar.setName(&#39;hello&#39;)</code>, so this will be <code>myCar</code>. In the world of object-oriented programming, the role of this is so simple.</p>
<p>Or in other words, I think:</p>
<blockquote>
<p>Once you leave object-oriented programming, this doesn’t really matter.</p>
</blockquote>
<p>Assuming that this can only be used in a class, there should be no problem, right? Have you seen anyone who writes Java or C++ complaining that this is difficult to understand? No, because the role of this is very simple.</p>
<p>So what is the problem? The problem is that in JavaScript, you can access this anywhere. So the this in JavaScript is different from the one used in other programming languages, which is why this is difficult to understand.</p>
<p>Although the definition of this is different, I think it is essentially similar. The first step to understanding this is to tell yourself: “Once you leave the object, you don’t need to pay much attention to the value of this, because it doesn’t make much sense.”</p>
<h1><span id="not-much-meaning-of-this">Not much meaning of this</span></h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
  
<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>What is the value of <code>this</code>?</p>
<p>As we mentioned earlier, in this case, I will tell you that <code>this</code> has no meaning, and you should not think that <code>this</code> will point to the <code>hello</code> function. There is no such thing.</p>
<p>Just remember what I said earlier: “When it is detached from the object, the value of <code>this</code> has no meaning.”</p>
<p>In this meaningless situation, the value of <code>this</code> in the browser will be <code>window</code>, in node.js it will be <code>global</code>, and in strict mode, the value of <code>this</code> will be <code>undefined</code>.</p>
<p>This rule should be easy to remember. Let me summarize it for you:</p>
<ol>
<li>In strict mode, it is always <code>undefined</code>.</li>
<li>In non-strict mode, it is <code>window</code> in the browser.</li>
<li>In non-strict mode, it is <code>global</code> in node.js.</li>
</ol>
<p>This is what you see in other articles as “default binding”, but I don’t intend to use any proprietary terms to talk about <code>this</code> in this article. I think that not using these terms will not hinder your understanding, and may even help you understand better. I’m not saying that proprietary terms are not important, but that you can learn the concepts first and then come back to supplement the proprietary terms.</p>
<p>Once detached from the object, the value of <code>this</code> has no meaning, and in the case of no meaning, there will be a default value, which is also easy to remember. In strict mode, it is <code>undefined</code>, and in non-strict mode, it is the global object.</p>
<h1><span id="changing-the-value-of-this">Changing the value of this</span></h1><p>Although <code>this</code> may have a default value, we can change it through some methods. There are three ways to change it.</p>
<p>The first two are very similar and are called <code>call</code> and <code>apply</code>. Both of these are functions that can call a function. Let me give you an example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
  
<span class="token function">hello</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// undefined 1 2</span>
<span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// undefined 1 2</span>
<span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// undefined 1 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>We have a function called <code>hello</code>, which logs the value of <code>this</code> and two parameters. When we call <code>hello(1, 2)</code>, because it is in strict mode, <code>this</code> is <code>undefined</code>, and <code>a</code> and <code>b</code> are 1 and 2.</p>
<p>When we call <code>hello.call(undefined, 1, 2)</code>, we ignore the first parameter. You can see that it is actually the same as <code>hello(1, 2)</code>.</p>
<p>The difference with <code>apply</code> is that the parameters passed in are an array. So these three ways of calling a function are equivalent and exactly the same. In addition to directly calling the function, you can also use <code>call</code> or <code>apply</code> to call it, and the difference is in the way the parameters are passed.</p>
<p>The difference between <code>call</code> and <code>apply</code> is that one is the same as calling a function normally, and the other is wrapped in an array.</p>
<p>What is the first parameter we just ignored?</p>
<p>You may have guessed that it is the value of <code>this</code>!</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
  
<span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'yo'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// yo 1 2</span>
<span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">'hihihi'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// hihihi 1 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>It’s that simple. Whatever you pass as the first parameter, the value of <code>this</code> inside will be that. Even if there is already a <code>this</code>, it will still be overridden by this method:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span>
  <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
<span class="token keyword">const</span> myCar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
myCar<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// myCar instance</span>
myCar<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'yaaaa'</span><span class="token punctuation">)</span> <span class="token comment">// yaaaa</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>The value of <code>this</code> should have been the <code>myCar</code> instance, but it was overridden by the parameter we passed in when using <code>call</code>.</p>
<p>In addition to the above two methods, there is one last way to change the value of <code>this</code>: <code>bind</code>.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
  
<span class="token keyword">const</span> myHello <span class="token operator">=</span> <span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'my'</span><span class="token punctuation">)</span>
<span class="token function">myHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// my</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>bind</code> will return a new function. Here we bind the <code>hello</code> function with <code>my</code>, so when we call <code>myHello()</code>, it will output <code>my</code>.</p>
<p>These are the three methods that can change the value of <code>this</code>. You may wonder what will happen if we use <code>call</code> and <code>bind</code> at the same time:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
  
<span class="token keyword">const</span> myHello <span class="token operator">=</span> <span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'my'</span><span class="token punctuation">)</span>
<span class="token function">myHello</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'call'</span><span class="token punctuation">)</span> <span class="token comment">// my</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>The answer is that it will not change. Once it is bound with <code>bind</code>, the value will not change.</p>
<p>One thing to note here is that in non-strict mode, if you pass a primitive as the parameter to <code>call</code>, <code>apply</code>, or <code>bind</code>, it will be converted to an object. For example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
  
<span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// [Number: 123]</span>
<span class="token keyword">const</span> myHello <span class="token operator">=</span> <span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'my'</span><span class="token punctuation">)</span>
<span class="token function">myHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// [String: 'my']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Let’s summarize:</p>
<ol>
<li><code>this</code> basically has no meaning outside of the object, and if forced to output, it will give a default value.</li>
<li><code>this</code> can be changed using <code>call</code>, <code>apply</code>, and <code>bind</code>.</li>
</ol>
<h1><span id="this-in-objects">this in objects</span></h1><p>At the beginning, we demonstrated <code>this</code> in object-oriented classes, but in JavaScript, there is another way to create objects:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
obj<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>This is different from the object-oriented example at the beginning. This example directly creates an object without using a class, so you won’t see the keyword <code>new</code>.</p>
<p>Before we continue, remember one thing:</p>
<blockquote>
<p>The value of <code>this</code> has nothing to do with where the code is located in the scope, but only with “how you call it”.</p>
</blockquote>
<p>This mechanism is exactly the opposite of the scope. If you are not sure what I am talking about, you can read this article first: <a target="_blank" rel="noopener" href="https://github.com/aszx87410/blog/issues/35">All functions are closures: talking about scope and closure in JS</a>.</p>
<p>Let’s review the scope with a simple example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
  
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'ojb'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hello2</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">200</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
obj<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">hello2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>No matter where I am or how I call the <code>test</code> function, the <code>a</code> it prints will always be the <code>a</code> of the global variable because that’s how the scope works. <code>test</code> cannot find <code>a</code> in its own scope, so it looks up one level, which is the global scope. This has nothing to do with where you call <code>test</code>. The scope of the <code>test</code> function is determined when it is “defined”.</p>
<p>However, <code>this</code> is completely different. The value of <code>this</code> will vary depending on how you call it. Do you remember <code>call</code>, <code>apply</code>, and <code>bind</code> that we just talked about? This is one of the examples. You can call a function in different ways to make the value of <code>this</code> different.</p>
<p>So you need to be very clear that these are two completely different operating modes, one is static (scope), and the other is dynamic (this). To see the scope, look at where the function is in the code; to see <code>this</code>, look at how the function is called.</p>
<p>Let’s take the most common example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
obj<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token keyword">const</span> hey <span class="token operator">=</span> obj<span class="token punctuation">.</span>hello
<span class="token function">hey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>It’s obviously the same function, why is <code>this.value</code> 1 the first time it’s called and undefined the second time?</p>
<p>Remember what I just said: “To see <code>this</code>, look at how the function is called.”</p>
<p>Before we continue, let me teach you the most important trick I learned from <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/23804247">What is <code>this</code> in JavaScript?</a>, which is a very convenient method.</p>
<p>In fact, we can convert all function calls into the form of <code>call</code> to see. For example, for the example above, it would be like this:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
obj<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
obj<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 轉成 call</span>
<span class="token keyword">const</span> hey <span class="token operator">=</span> obj<span class="token punctuation">.</span>hello
<span class="token function">hey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
<span class="token function">hey</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 轉成 call</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>The rule is that whatever you are before calling the function, you put it at the end. So <code>obj.hello()</code> becomes <code>obj.hello.call(obj)</code>, and <code>hey()</code> has nothing in front of it, so it becomes <code>hey.call()</code>.</p>
<p>After converting to this form, do you remember that the first parameter of <code>call</code> is <code>this</code>? So you can immediately know what the value of <code>this</code> is!</p>
<p>Let’s take a more complicated example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">inner</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> obj<span class="token punctuation">.</span>inner
<span class="token keyword">const</span> hello <span class="token operator">=</span> obj<span class="token punctuation">.</span>inner<span class="token punctuation">.</span>hello
obj<span class="token punctuation">.</span>inner<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj2<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>You can think about what values each of the three functions will print.</p>
<p>Now I’m going to reveal the answer. Just convert it to the form we just talked about:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">obj<span class="token punctuation">.</span>inner<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj.inner.hello.call(obj.inner) => 2</span>
obj2<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj2.hello.call(obj2) => 2</span>
<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// hello.call() => undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>I want to explain the last <code>hello</code> function in particular because nothing is passed in, so it is bound by default and is <code>window</code> in non-strict mode, so it logs <code>window.value</code>, which is undefined.</p>
<p>As long as you convert the function call into the form of <code>call</code>, it is easy to see what the value of <code>this</code> is.</p>
<p>This is also what I have been saying: “To see <code>this</code>, look at how the function is called”, and if you want to see how it is called, just convert it to the form of <code>call</code>.</p>
<p>By now, you should be able to solve 90% of the problems related to <code>this</code>. Let’s try it out (for readability, there are no blank lines to avoid errors, so please scroll down to see the code, and the answer will be below):</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
  
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> hello <span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> hello <span class="token punctuation">&#125;</span>
<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
b<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Just follow what we said before and convert it to the form of <code>call</code>:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// hello.call() => window（瀏覽器非嚴格模式）</span>
a<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// a.hello.call(a) => a</span>
b<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=></span> 直接用 apply，所以就是 a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>Here’s a different question, so be careful (assuming it’s running in a browser, non-strict mode):</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>If you get this question wrong, it must be because you forgot our most important sentence:</p>
<blockquote>
<p>To see <code>this</code>, look at how the function is called.</p>
</blockquote>
<p>How do we call <code>test</code>? <code>test()</code>, so it’s <code>test.call()</code> which is the default binding, and the value of <code>this</code> will be <code>window</code>, so <code>this.x</code> will be 10 because a global variable <code>x = 10</code> is declared on the first line.</p>
<p>To avoid forgetting what we talked about earlier, let’s review:</p>
<ol>
<li><code>this</code> outside of an object basically has no meaning.</li>
<li>Meaningless <code>this</code> will be given a default value based on strict mode and the environment.</li>
<li>The default value under strict mode is undefined, and under non-strict mode in a browser, the default value is window.</li>
<li><code>this</code> can be changed using <code>call</code>, <code>apply</code>, and <code>bind</code>.</li>
<li>To see <code>this</code>, look at how the function is called.</li>
<li>You can think of <code>a.b.c.hello()</code> as <code>a.b.c.hello.call(a.b.c)</code>, and so on, to easily find the value of <code>this</code>.</li>
</ol>
<h1><span id="non-conformist-arrow-functions">Non-conformist Arrow Functions</span></h1><p>The part about <code>this</code> should have ended above, but the arrow functions introduced in ES6 have a slightly different way of working. They don’t have their own <code>this</code>, so “the <code>this</code> at the place where it is declared is what its <code>this</code> is.” Okay, I know this sounds super confusing, let’s look at an example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 這邊印出來的 this 是什麼，test 的 this 就是什麼</span>
    <span class="token comment">// 就是我說的：</span>
    <span class="token comment">// 在宣告它的地方的 this 是什麼，test 的 this 就是什麼</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>     
    <span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
  
obj<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token keyword">const</span> hello <span class="token operator">=</span> obj<span class="token punctuation">.</span>hello
<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>In the <code>hello</code> function on line 5, we declare the <code>test</code> arrow function, so the <code>this</code> of <code>hello</code> is what the <code>this</code> of <code>test</code> is.</p>
<p>So when we call <code>obj.hello()</code>, the <code>this</code> of <code>test</code> will be <code>obj</code>; when we call <code>hello()</code>, the <code>this</code> of <code>test</code> will be the global object. This rule is actually the same as before, the only difference is that the <code>this</code> of arrow functions is not determined by themselves, but by the <code>this</code> at the place where they are declared.</p>
<p>If you want to see more complex examples, you can refer to this article: <a target="_blank" rel="noopener" href="https://wcc723.github.io/javascript/2017/12/21/javascript-es6-arrow-function/">Ironman Competition: Arrow Functions</a></p>
<h1><span id="practical-application-react">Practical Application: React</span></h1><p>If you’ve written React, you’ll know that there are some concepts that today’s tutorial can be useful for. For example, we must bind some methods in the constructor, have you ever wondered why?</p>
<p>Let’s first see what happens if we don’t bind:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>
  <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>onClick<span class="token punctuation">&#125;</span><span class="token operator">></span>click<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>The value logged at the end will be <code>undefined</code>. Why? This detail depends on the React source code, only React knows how the <code>onClick</code> function we passed down is actually called.</p>
<p>So why bind? To ensure that we always get the instance itself in <code>onClick</code>.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   
    <span class="token comment">// 所以當你把 this.onClick 傳下去時，就已經綁定好了 this</span>
    <span class="token comment">// 而這邊的 this 就是這個 component</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>onClick<span class="token punctuation">&#125;</span><span class="token operator">></span>click<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>There is another way to use arrow functions:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">></span>click<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Why can arrow functions also be used? Because as we mentioned earlier, “the <code>this</code> at the place where it is declared is what its <code>this</code> is,” so the <code>this</code> logged here will be the <code>this</code> of the <code>render</code> function, and the <code>this</code> of <code>render</code> is the component itself.</p>
<p>If you’ve forgotten a bit, you can scroll to the top of the article, because we’ve already mentioned these things at the beginning.</p>
<h1><span id="summary">Summary</span></h1><p>I’ve read at least a dozen or twenty articles on explaining <code>this</code>, the more common ones are about explaining different binding methods and when to use which binding. But I haven’t mentioned these in this article because I don’t think they affect understanding (but it’s best to supplement related terms later).</p>
<p>I’ve been confused before, and <code>this</code> has confused me a lot. Recently, because of teaching, I had to understand <code>this</code>, and I really understand a lot more than before. From my experience, I think one of the reasons why <code>this</code> is complicated is that “you can use <code>this</code> outside of objects,” so I repeatedly emphasized that I think <code>this</code> outside of objects is meaningless.</p>
<p>The time when I really understood <code>this</code> was when I saw <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/23804247">What is the value of <code>this</code>?</a>, which was really enlightening. Changing the general function call to the form of using <code>call</code> is an easy-to-understand and easy-to-remember method, and it can be applied in 90% of scenarios.</p>
<p>Finally, I emphasize again that this article has omissions. The examples at the beginning cannot be explained with the knowledge learned in this article. You really have to look at ECMAScript. I also didn’t mention the <code>this</code> of browser events, but this part is relatively simple. I only hope that this article can give beginners who have been stuck in <code>this</code> for a long time some new ideas, and after reading this article, they can think about the value of <code>this</code> and its existence from different perspectives.</p>
<p>After writing this article, I’ve explained almost all the questions about JavaScript that are very common but I didn’t understand before. Interested friends can refer to other topics:</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/aszx87410/blog/issues/18">It’s time to understand JavaScript’s prototype chain</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/aszx87410/blog/issues/30">In-depth discussion of parameter passing in JavaScript: call by value or reference?</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/aszx87410/blog/issues/34">I know you understand hoisting, but do you understand it deeply enough?</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/aszx87410/blog/issues/35">All functions are closures: talking about scope and closure in JS</a></li>
</ol>
<p>Reference:</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/mqyqingfeng/Blog/issues/7">JavaScript Deep Dive: Understanding <code>this</code> from the ECMAScript Specification</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/23804247">What is the value of <code>this</code> in JavaScript? Explained clearly</a></li>
<li><a target="_blank" rel="noopener" href="https://kuro.tw/posts/2017/10/12/What-is-THIS-in-JavaScript-%E4%B8%8A/">What’s <code>this</code> in JavaScript?</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nightn/front-end-plan/blob/master/js/js-this.md">JS <code>this</code></a></li>
</ol>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/en/tags/Front-end/">#Front-end</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/en/tags/JavaScript/">#JavaScript</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2019/03/24/en/react-keypress-keydown/">Understanding keyPress and keyDown events in React source code</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2019/01/27/en/functional-css/">Functional CSS Experience Sharing: Is It a Blessing or a Curse?</a>
            
        </span>
    </div>
    
</article>




<div class="comments">
    <h3 class="title is-4">Comments</h3>
    <script src="https://utteranc.es/client.js"
        repo="aszx87410/huli-blog"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2025 Huli&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow" title="GitHub" target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-minos">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>English</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            <!-- NOTE: 永遠回到首頁 -->
            
                <a href="/2019/02/23/javascript-what-is-this/" class="dropdown-item">
                    繁體中文
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>



    
    
    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js?v=3.js"></script>


    
</body>
</html>