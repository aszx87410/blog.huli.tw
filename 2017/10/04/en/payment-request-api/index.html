<!DOCTYPE html>
<html class="has-navbar-fixed-top" lang="en">
<head>
    <meta charset="utf-8">
<title>Unified Web Payment Interface: Payment Request API - Huli&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


<link href="https://blog.huli.tw/2017/10/04/en/payment-request-api/" rel="alternate" hreflang="en" />


<link href="https://blog.huli.tw/2017/10/04/payment-request-api/" rel="alternate" hreflang="x-default" />


            
<link href="https://blog.huli.tw/2017/10/04/payment-request-api/" rel="alternate" hreflang="zh-TW" />
            





    
<link rel="canonical" href="https://blog.huli.tw/2017/10/04/en/payment-request-api/">
    





    <meta name="description" content="IntroductionI came across an article on Hacker News about Payment Request API — Now Being Implemented in All Major Browsers, which means that Payment Request API will be implemented in mainstream brow">
<meta property="og:type" content="article">
<meta property="og:title" content="Unified Web Payment Interface: Payment Request API">
<meta property="og:url" content="https://blog.huli.tw/2017/10/04/en/payment-request-api/index.html">
<meta property="og:site_name" content="Huli&#39;s blog">
<meta property="og:description" content="IntroductionI came across an article on Hacker News about Payment Request API — Now Being Implemented in All Major Browsers, which means that Payment Request API will be implemented in mainstream brow">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350671-d15b4580-f6ea-11e8-9284-ad05641169a9.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350675-d7512680-f6ea-11e8-90d6-5cf6051473a9.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350682-e041f800-f6ea-11e8-87a2-9b7c1a753bd8.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350687-e637d900-f6ea-11e8-83ae-9b3ed1814d28.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350692-e9cb6000-f6ea-11e8-915a-9bf135aa50ec.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350712-05366b00-f6eb-11e8-913c-45a7233f1612.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350717-0c5d7900-f6eb-11e8-827e-24484af459b4.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350722-14b5b400-f6eb-11e8-94cd-18411811f4e3.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350727-17180e00-f6eb-11e8-8471-12a2714d8c76.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350733-1aab9500-f6eb-11e8-9ba8-15e9e994797e.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350737-1da68580-f6eb-11e8-848c-3f7d5a1f2ba2.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350753-2eef9200-f6eb-11e8-93c8-610b602373dd.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350756-31ea8280-f6eb-11e8-86c3-f0102fbecbbe.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2755720/49350760-344cdc80-f6eb-11e8-899a-e1a5652d9e1c.png">
<meta property="article:published_time" content="2017-10-04T14:07:00.000Z">
<meta property="article:modified_time" content="2023-06-20T05:10:49.070Z">
<meta property="article:author" content="Huli">
<meta property="article:tag" content="Front-end">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/2755720/49350671-d15b4580-f6ea-11e8-9284-ad05641169a9.png">



<link rel="alternative" href="/atom.xml" title="Unified Web Payment Interface: Payment Request API" type="application/atom+xml">



<link rel="icon" href="/img/lidemy_logo.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">


<link rel="stylesheet" href="/css/bulma.css?v=2.css">



<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" />


<link rel="stylesheet" href="/css/style.css?v=4.css">





    
    
    
    
    
    
    
    
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1393J2EVCZ"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1393J2EVCZ');
</script>


    


<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <script>
        if (localStorage.getItem('dark-mode')) {
            if (localStorage.getItem('dark-mode') === 'true') {
                document.body.classList.add('dark-mode')
            }
        } else {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode')
            }
        }
    </script>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/en">
                
                    
                    Huli&#39;s blog
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/en/archives">Archive</a>
            
            <a class="navbar-item "
               href="/en/categories">Categories</a>
            
            <a class="navbar-item "
               href="/en/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    Table of Contents
                </a>
                <div class="navbar-dropdown">
                    
                    
                    
                    
                    <a class="navbar-item" href="#introduction">1&nbsp;&nbsp;<b>Introduction</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#introduction-to-payment-request-api">2&nbsp;&nbsp;<b>Introduction to Payment Request API</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#browsers-first-attempt-auto-fill">3&nbsp;&nbsp;<b>Browser’s First Attempt: Auto-fill</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#browser-leave-it-to-me">4&nbsp;&nbsp;<b>Browser: Leave it to me!</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#so-what-is-payment-request-api">5&nbsp;&nbsp;<b>So what is Payment Request API?</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#usage-process">6&nbsp;&nbsp;<b>Usage Process</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#step-1-create-payment-request-object">6.1&nbsp;&nbsp;Step 1: Create Payment Request Object</a>
                    
                    
                    
                    <a class="navbar-item" href="#step-2-call-the-api-and-display-the-checkout-page">6.2&nbsp;&nbsp;Step 2: Call the API and Display the Checkout Page</a>
                    
                    
                    
                    <a class="navbar-item" href="#step-3-process-data-and-return-results">6.3&nbsp;&nbsp;Step 3: Process Data and Return Results</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#native-checkout-ui">7&nbsp;&nbsp;<b>Native Checkout UI</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#computer">7.1&nbsp;&nbsp;Computer</a>
                    
                    
                    
                    <a class="navbar-item" href="#mobile">7.2&nbsp;&nbsp;Mobile</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#summary">8&nbsp;&nbsp;<b>Summary</b></a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" target="_blank" title="Twitter" href="https://twitter.com/aszx87410">
                
                <i class="fab fa-twitter"></i>
                
            </a>
               
            <a class="navbar-item" target="_blank" title="RSS" href="/atom-en.xml">
                
                <i class="fas fa-rss"></i>
                
            </a>
               
            
            <a class="navbar-item btn-dark-mode" title="dark-mode" href="#">
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="15" height="15" viewBox="0 0 256 256" xml:space="preserve">
                    <defs>
                    </defs>
                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                        <path d="M 87.823 60.7 c -0.463 -0.423 -1.142 -0.506 -1.695 -0.214 c -15.834 8.398 -35.266 2.812 -44.232 -12.718 c -8.966 -15.53 -4.09 -35.149 11.101 -44.665 c 0.531 -0.332 0.796 -0.963 0.661 -1.574 c -0.134 -0.612 -0.638 -1.074 -1.259 -1.153 c -9.843 -1.265 -19.59 0.692 -28.193 5.66 C 13.8 12.041 6.356 21.743 3.246 33.35 S 1.732 57.08 7.741 67.487 c 6.008 10.407 15.709 17.851 27.316 20.961 C 38.933 89.486 42.866 90 46.774 90 c 7.795 0 15.489 -2.044 22.42 -6.046 c 8.601 -4.966 15.171 -12.43 18.997 -21.586 C 88.433 61.79 88.285 61.123 87.823 60.7 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: #ffa716; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                    </g>
                    </svg>
                </div>
            </a>
            
               <a class="navbar-item" href="/2017/10/04/payment-request-api/">中文</a>
            
            

        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
      
      <div data-nosnippet class="self-notice">
        If you have any thoughts on my blog or articles and you want to let me know, you can either post a comment below(public) or tell me via this <a href="https://forms.gle/SjJZ4cnNs6NnjXQG8" target="_blank">feedback form</a>
      </div>
      
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Unified Web Payment Interface: Payment Request API
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2017-10-04T14:07:00.000Z" itemprop="datePublished">4 October 2017</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/en/categories/Front-end/">Front-end</a>
        </span>
        
        
        
        <spen data-nosnippet class="column is-narrow">(Translated by ChatGPT)</span>
        
    </div>
    
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h1><span id="introduction">Introduction</span></h1><p>I came across an article on <a target="_blank" rel="noopener" href="https://news.ycombinator.com/item?id=15272374">Hacker News</a> about <a target="_blank" rel="noopener" href="https://www.w3.org/blog/wpwg/2017/09/14/payment-request-api-now-being-implemented-in-all-major-browsers-advances-on-the-recommendation-track/">Payment Request API — Now Being Implemented in All Major Browsers</a>, which means that <code>Payment Request API</code> will be implemented in mainstream browsers.</p>
<p>Before that, I had never heard of it and had no idea what it was doing. But after a little research, I found out that it is the future of web payment interface.</p>
<span id="more"></span>

<h1><span id="introduction-to-payment-request-api">Introduction to Payment Request API</span></h1><p>Before understanding a new thing, I usually start with the “purpose”. If you know what this thing is born to solve, you can have the most basic understanding of it.</p>
<p>The reason for the birth of Payment Request API is simple, it is to solve the payment problem, especially on mobile devices.</p>
<p>Let’s not talk about mobile devices first, let’s talk about payment on computers.</p>
<p>Now every shopping website has different payment interfaces, connected to different payment service providers. Suppose I bought “Critique of Pure Reason” on Shopee, filled in my credit card number and shipping address, and Shopee kindly remembered it for me, so the next time I shop, I don’t have to fill in the shipping address again.</p>
<p>However, if today a PChome merchant spends money to promote various discounts, and I decide to shop on PChome, I will have to fill in my credit card number and shipping address again for “The Interpretation of Dreams”.</p>
<p>What is the problem?</p>
<p>The problem is that the checkout process and interface of each company and website are different, although they are similar, but those data cannot be shared. Even if I fill in the shipping address on 100 websites, I still have to fill it in again on the 101st website because they don’t have my data.</p>
<p>Is there anything in common with the above?</p>
<p>Yes, you are using the same browser to shop.</p>
<h1><span id="browsers-first-attempt-auto-fill">Browser’s First Attempt: Auto-fill</span></h1><p>The scenario mentioned above is not accurate because you should find that the browser will automatically remember your address and credit card, so you can easily use the auto-fill function.</p>
<p>For example, when swiping a card, as long as you swipe it once, Chrome can remember the card information in the browser. The next time you swipe a card on another website, you only need to click on the input box of the card number, and Chrome will prompt you to use the previous card to pay.</p>
<p>The same goes for addresses, which are remembered by the browser, so you only need to fill them in once, and Chrome will automatically fill them in for you in the future.</p>
<p>However, there is still a problem, that is, the checkout process and interface are still not unified, and everyone has their own different implementations, and some payment interfaces are simply unbearable, especially on mobile devices!</p>
<p>According to Google’s <a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/payments/payment-request-ux-considerations">statistics</a>, 65.9% of users leave before completing all the processes when shopping on mobile devices. This has exceeded half of the users, indicating that many websites still have a lot of room for improvement in the mobile payment interface.</p>
<p>This time, the browser decided to jump down and solve this problem by itself.</p>
<h1><span id="browser-leave-it-to-me">Browser: Leave it to me!</span></h1><p>How does the browser solve this pain point?</p>
<p>Simple! Just let the browser provide a unified checkout interface, and even the process is unified. The merchant’s webpage can bring in different parameters according to different needs, but in the end, it calls the API provided by the browser (that is, our protagonist today: Payment Request API) to call up the native interface of the browser.</p>
<p>When this API becomes popular and everyone finds it easier to use, all websites will follow suit and adopt the same method. This ensures that the payment process of all websites is unified.</p>
<h1><span id="so-what-is-payment-request-api">So what is Payment Request API?</span></h1><blockquote>
<p>Simply put, it is an API provided by the browser. When the webpage calls it with JavaScript, the native checkout interface of the browser will appear, which is used to replace the original checkout process of the merchant.</p>
</blockquote>
<p>You can understand it directly by looking at a picture:</p>
<p><img src="https://user-images.githubusercontent.com/2755720/49350671-d15b4580-f6ea-11e8-9284-ad05641169a9.png" alt="intro"></p>
<p>This is what it looks like after calling the API.</p>
<p>One thing to note is that the Payment Request API is “completely unrelated” to the backend, and the backend can receive data as usual. The difference is in the frontend, where the checkout pages that you used to write can now be rendered by the browser’s native UI, and you only need to call the Payment Request API.</p>
<p>After calling the API, you can obtain the data filled in by the user and send it to the server as before.</p>
<p>However, it should be noted that this API is not yet widely used. According to the data from <a target="_blank" rel="noopener" href="https://caniuse.com/#feat=payment-request">caniuse.com</a>, only Chrome 61, Edge 15, and Opera 48 or above support it, and other browsers still need to wait.</p>
<h1><span id="usage-process">Usage Process</span></h1><p>After saying so much, let’s actually run the process!</p>
<p>First, we create a simple <a target="_blank" rel="noopener" href="https://aszx87410.github.io/payment-request-demo/">demo page</a> to detect whether Payment Request is supported and place the purchase button and return results:</p>
<p><img src="https://user-images.githubusercontent.com/2755720/49350675-d7512680-f6ea-11e8-90d6-5cf6051473a9.png" alt="interface"></p>
<h2><span id="step-1-create-payment-request-object">Step 1: Create Payment Request Object</span></h2><p><code>PaymentRequest</code> accepts three parameters: payment method, transaction information, and others.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PaymentRequest</span><span class="token punctuation">(</span>
  methodData<span class="token punctuation">,</span> <span class="token comment">// Supported payment methods</span>
  details<span class="token punctuation">,</span>    <span class="token comment">// Detailed transaction information</span>
  options     <span class="token comment">// Others, such as shipping methods, etc.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>First, we implement a simple function to return the created PaymentRequest:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createPaymentRequest</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> methodData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">supportedMethods</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'basic-card'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Support credit card</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// Specify more detailed information</span>
      <span class="token literal-property property">supportedNetworks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'jcb'</span><span class="token punctuation">,</span> <span class="token string">'mastercard'</span><span class="token punctuation">,</span> <span class="token string">'visa'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
      <span class="token literal-property property">supportedTypes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'debit'</span><span class="token punctuation">,</span> <span class="token string">'credit'</span><span class="token punctuation">,</span> <span class="token string">'prepaid'</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> details <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">displayItems</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// Purchased items</span>
      <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"TechBridge Weekly Professional Edition for one year"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">"TWD"</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span> <span class="token operator">:</span> <span class="token string">"3000.00"</span> <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"Early bird discount"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">"TWD"</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span> <span class="token operator">:</span> <span class="token string">"-300.00"</span> <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">total</span><span class="token operator">:</span>  <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"Total"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">"TWD"</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span> <span class="token operator">:</span> <span class="token string">"2700.00"</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PaymentRequest</span><span class="token punctuation">(</span>methodData<span class="token punctuation">,</span> details<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>One thing to note here is that the total amount in <code>total</code> will not be automatically calculated by the system, so even if the sum above is 2700, you can enter other numbers.</p>
<p>Another condition is that this API does not support refunds, so the total must be positive. However, each item can be negative, so you can put some discount-related things.</p>
<h2><span id="step-2-call-the-api-and-display-the-checkout-page">Step 2: Call the API and Display the Checkout Page</span></h2><p>After creating the PaymentRequest, you can use <code>.show()</code> to display the checkout UI, which will return a Promise. After using it, you can obtain the relevant information of the user. We will perform the checkout process after clicking the purchase button.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">onClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token function">createPaymentRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  request<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">PaymentResponse</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">handleResponse</span><span class="token punctuation">(</span>PaymentResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2><span id="step-3-process-data-and-return-results">Step 3: Process Data and Return Results</span></h2><p>The last step is to process the data obtained from the previous step, send that information to the server to complete the checkout process, and return the result to display success or failure on the UI. Since this is just an example, we will skip the above steps and directly convert the data obtained from the previous step into JSON to display it.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">showResponse</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  $res<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
  
<span class="token keyword">function</span> <span class="token function">handleResponse</span> <span class="token punctuation">(</span><span class="token parameter">paymentResponse</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// You can return the result to the server here</span>
  <span class="token comment">// This is just an example, so we will display the data directly</span>
  <span class="token function">showResponse</span><span class="token punctuation">(</span>paymentResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Simulate API delay</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Checkout successful</span>
    paymentResponse<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://user-images.githubusercontent.com/2755720/49350682-e041f800-f6ea-11e8-87a2-9b7c1a753bd8.png" alt="result"></p>
<p>(The card number here is randomly generated from <a target="_blank" rel="noopener" href="http://www.getcreditcardnumbers.com/">http://www.getcreditcardnumbers.com/</a>)</p>
<p>With just the simple three steps above, you can obtain user data and complete the checkout process. The advantage of using the Payment Request API over the proprietary checkout process built by each website is that it can provide users with a native checkout experience, thereby increasing conversion rates.</p>
<p>The most important part of the above three steps is the part where the input parameters are passed in. There are many details that can be adjusted here, such as currency type, shipping address requirements, and whether to accept or reject based on the address selected by the user (for example, if you do not accept delivery to foreign countries, you can judge it there).</p>
<p>Payment methods can also specify certain credit cards or even decide whether to support debit cards.</p>
<p>If you are interested in these details, you can refer to the very detailed tutorial provided by Google: <a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/payments/deep-dive-into-payment-request">Deep Dive into the Payment Request API</a>.</p>
<h1><span id="native-checkout-ui">Native Checkout UI</span></h1><p>If you want to run the checkout process yourself, you can go directly to the <a target="_blank" rel="noopener" href="https://aszx87410.github.io/payment-request-demo/">demo webpage</a> to try it out.</p>
<p>Here, I will directly show you the checkout process on the computer and mobile phone by taking screenshots.</p>
<h2><span id="computer">Computer</span></h2><p>Screen after clicking the button:<br><img src="https://user-images.githubusercontent.com/2755720/49350687-e637d900-f6ea-11e8-83ae-9b3ed1814d28.png" alt="intro 1"></p>
<p>Click into the order summary:<br><img src="https://user-images.githubusercontent.com/2755720/49350692-e9cb6000-f6ea-11e8-915a-9bf135aa50ec.png" alt="intro-details"></p>
<p>Add credit card:<br><img src="https://user-images.githubusercontent.com/2755720/49350712-05366b00-f6eb-11e8-913c-45a7233f1612.png" alt="add-credit-card"></p>
<p>Add address:<br><img src="https://user-images.githubusercontent.com/2755720/49350717-0c5d7900-f6eb-11e8-827e-24484af459b4.png" alt="add-address-done"></p>
<p>After clicking pay, enter the last three digits:<br><img src="https://user-images.githubusercontent.com/2755720/49350722-14b5b400-f6eb-11e8-94cd-18411811f4e3.png" alt="code"></p>
<p>Checkout failed:<br><img src="https://user-images.githubusercontent.com/2755720/49350727-17180e00-f6eb-11e8-8471-12a2714d8c76.png" alt="fail"></p>
<h2><span id="mobile">Mobile</span></h2><p>Screen after clicking the button:<br><img src="https://user-images.githubusercontent.com/2755720/49350733-1aab9500-f6eb-11e8-9ba8-15e9e994797e.png" alt="mobile-intro"></p>
<p>Click into order summary:<br><img src="https://user-images.githubusercontent.com/2755720/49350737-1da68580-f6eb-11e8-848c-3f7d5a1f2ba2.png" alt="mobile-intro-details"></p>
<p>Add credit card:<br><img src="https://user-images.githubusercontent.com/2755720/49350753-2eef9200-f6eb-11e8-93c8-610b602373dd.png" alt="mobile-add-card"></p>
<p>Add address:<br><img src="https://user-images.githubusercontent.com/2755720/49350756-31ea8280-f6eb-11e8-86c3-f0102fbecbbe.png" alt="mobile-add-address"></p>
<p>Checkout failed:<br><img src="https://user-images.githubusercontent.com/2755720/49350760-344cdc80-f6eb-11e8-899a-e1a5652d9e1c.png" alt="mobile-fail"></p>
<h1><span id="summary">Summary</span></h1><p>Payment Request API is being implemented by other browsers (such as Safari), and it can be expected to be widely supported in the future.</p>
<p>In fact, the foreign payment processor Stripe <a target="_blank" rel="noopener" href="https://stripe.com/docs/payment-request-api">already supports</a> the use of Payment Request API. The <a target="_blank" rel="noopener" href="https://googlechrome.github.io/samples/paymentrequest/">PaymentRequest Sample</a> website also provides more diverse examples.</p>
<p>The main purpose of this article is to introduce this new standard to everyone. If you are interested in further research, there are many related resources attached below.</p>
<p>References:</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Payment_Request_API">MDN - Payment Request API</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/payments/deep-dive-into-payment-request">Deep Dive into the Payment Request API</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/payments/">Introducing the Payment Request API</a></li>
<li><a target="_blank" rel="noopener" href="https://googlechrome.github.io/samples/paymentrequest/credit-cards/">PaymentRequest Credit Cards Sample</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/w3c/payment-request-info/wiki/FAQ">w3c&#x2F;payment-request-info FAQ</a></li>
</ol>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/en/tags/Front-end/">#Front-end</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2017/12/08/en/introduction-to-rxjs-observable/">The Most Beginner-Friendly RxJS Tutorial</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2017/09/06/en/spa-single-page-application/">Front-end Separation and SPA</a>
            
        </span>
    </div>
    
</article>




<div class="comments">
    <h3 class="title is-4">Comments</h3>
    <script src="https://utteranc.es/client.js"
        repo="aszx87410/huli-blog"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2025 Huli&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow" title="GitHub" target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-minos">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>English</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            <!-- NOTE: 永遠回到首頁 -->
            
                <a href="/2017/10/04/payment-request-api/" class="dropdown-item">
                    繁體中文
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>



    
    
    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js?v=3.js"></script>


    
</body>
</html>