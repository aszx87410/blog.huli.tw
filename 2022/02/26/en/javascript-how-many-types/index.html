<!DOCTYPE html>
<html class="has-navbar-fixed-top" lang="en">
<head>
    <meta charset="utf-8">
<title>Counting all data types in JavaScript - Huli&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1">



            
<link href="https://blog.huli.tw/2022/02/26/javascript-how-many-types/" rel="alternate" hreflang="zh-TW" />
            
    




    
<link rel="canonical" href="https://blog.huli.tw/2022/02/26/en/javascript-how-many-types/">
    





    <meta name="description" content="How many data types are there in JavaScript? And what are they? Before discussing data types, we should first know how many types there are in JavaScript and have a basic understanding of each type. B">
<meta property="og:type" content="article">
<meta property="og:title" content="Counting all data types in JavaScript">
<meta property="og:url" content="https://blog.huli.tw/2022/02/26/en/javascript-how-many-types/index.html">
<meta property="og:site_name" content="Huli&#39;s blog">
<meta property="og:description" content="How many data types are there in JavaScript? And what are they? Before discussing data types, we should first know how many types there are in JavaScript and have a basic understanding of each type. B">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://blog.huli.tw/img/javascript-how-many-types/cover-en.png">
<meta property="article:published_time" content="2022-02-25T15:02:51.000Z">
<meta property="article:modified_time" content="2023-06-20T05:46:56.918Z">
<meta property="article:author" content="Huli">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.huli.tw/img/javascript-how-many-types/cover-en.png">



<link rel="alternative" href="/atom.xml" title="Counting all data types in JavaScript" type="application/atom+xml">



<link rel="icon" href="/img/lidemy_logo.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">


<link rel="stylesheet" href="/css/bulma.css?v=2.css">



<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" />


<link rel="stylesheet" href="/css/style.css?v=4.css">





    
    
    
    
    
    
    
    
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1393J2EVCZ"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1393J2EVCZ');
</script>


    


<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <script>
        if (localStorage.getItem('dark-mode')) {
            if (localStorage.getItem('dark-mode') === 'true') {
                document.body.classList.add('dark-mode')
            }
        } else {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode')
            }
        }
    </script>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/en">
                
                    
                    Huli&#39;s blog
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/en/archives">Archive</a>
            
            <a class="navbar-item "
               href="/en/categories">Categories</a>
            
            <a class="navbar-item "
               href="/en/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    Table of Contents
                </a>
                <div class="navbar-dropdown">
                    
                    
                    
                    
                    <a class="navbar-item" href="#how-many-types-are-there-in-javascript">1&nbsp;&nbsp;<b>How many types are there in JavaScript?</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#1-undefined">1.1&nbsp;&nbsp;1. Undefined</a>
                    
                    
                    
                    <a class="navbar-item" href="#2-null">1.2&nbsp;&nbsp;2. Null</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-boolean">1.3&nbsp;&nbsp;3. Boolean</a>
                    
                    
                    
                    <a class="navbar-item" href="#4-string">1.4&nbsp;&nbsp;4. String</a>
                    
                    
                    
                    <a class="navbar-item" href="#5-symbol">1.5&nbsp;&nbsp;5. Symbol</a>
                    
                    
                    
                    <a class="navbar-item" href="#6-number">1.6&nbsp;&nbsp;6. Number</a>
                    
                    
                    
                    <a class="navbar-item" href="#7-bigint">1.7&nbsp;&nbsp;7. BigInt</a>
                    
                    
                    
                    <a class="navbar-item" href="#8-object">1.8&nbsp;&nbsp;8. Object</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#summary">2&nbsp;&nbsp;<b>Summary</b></a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" target="_blank" title="Twitter" href="https://twitter.com/aszx87410">
                
                <i class="fab fa-twitter"></i>
                
            </a>
               
            <a class="navbar-item" target="_blank" title="RSS" href="/atom-en.xml">
                
                <i class="fas fa-rss"></i>
                
            </a>
               
            
            <a class="navbar-item btn-dark-mode" title="dark-mode" href="#">
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="15" height="15" viewBox="0 0 256 256" xml:space="preserve">
                    <defs>
                    </defs>
                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                        <path d="M 87.823 60.7 c -0.463 -0.423 -1.142 -0.506 -1.695 -0.214 c -15.834 8.398 -35.266 2.812 -44.232 -12.718 c -8.966 -15.53 -4.09 -35.149 11.101 -44.665 c 0.531 -0.332 0.796 -0.963 0.661 -1.574 c -0.134 -0.612 -0.638 -1.074 -1.259 -1.153 c -9.843 -1.265 -19.59 0.692 -28.193 5.66 C 13.8 12.041 6.356 21.743 3.246 33.35 S 1.732 57.08 7.741 67.487 c 6.008 10.407 15.709 17.851 27.316 20.961 C 38.933 89.486 42.866 90 46.774 90 c 7.795 0 15.489 -2.044 22.42 -6.046 c 8.601 -4.966 15.171 -12.43 18.997 -21.586 C 88.433 61.79 88.285 61.123 87.823 60.7 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: #ffa716; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                    </g>
                    </svg>
                </div>
            </a>
            
               <a class="navbar-item" href="/2022/02/26/javascript-how-many-types/">中文</a>
            
            

        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
      
      <div data-nosnippet class="self-notice">
        If you have any thoughts on my blog or articles and you want to let me know, you can either post a comment below(public) or tell me via this <a href="https://forms.gle/SjJZ4cnNs6NnjXQG8" target="_blank">feedback form</a>
      </div>
      
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Counting all data types in JavaScript
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2022-02-25T15:02:51.000Z" itemprop="datePublished">26 February 2022</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/en/categories/JavaScript/">JavaScript</a>
        </span>
        
        
        
        <spen data-nosnippet class="column is-narrow">(Translated by ChatGPT)</span>
        
    </div>
    
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>How many data types are there in JavaScript? And what are they?</p>
<p>Before discussing data types, we should first know how many types there are in JavaScript and have a basic understanding of each type. Before we start, you can count them yourself and then compare your answer with mine to see if it is correct.</p>
<p>As JavaScript evolves, this article will use the latest ECMAScript 2021 as the standard. If “spec” is mentioned below, it refers to the <a target="_blank" rel="noopener" href="https://www.ecma-international.org/publications-and-standards/standards/ecma-262/">ECMAScript 2021 language specification</a> .</p>
<span id="more"></span>

<h2><span id="how-many-types-are-there-in-javascript">How many types are there in JavaScript?</span></h2><p>In the spec, in the sixth chapter: “ECMAScript Data Types and Values”, it talks about types and divides them into two types:</p>
<blockquote>
<p>Types are further subclassified into ECMAScript language types and specification types. (p.71)</p>
</blockquote>
<p>What are ECMAScript language types and what are specification types? Let’s start with the latter:</p>
<blockquote>
<p>A specification type corresponds to meta-values that are used within algorithms to describe the semantics of ECMAScript language constructs and ECMAScript language types. The specification types include Reference, List, Completion, Property Descriptor, Environment Record, Abstract Closure, and Data Block. (p.100)</p>
</blockquote>
<p>Specification types are named after their use in the specification and can be used to describe some syntax or algorithms in the specification. For example, you will see types such as “Reference”, “List”, and “Environment Record” in the specification.</p>
<p>The other type, ECMAScript language types, is described in the specification as follows:</p>
<blockquote>
<p>An ECMAScript language type corresponds to values that are directly manipulated by an ECMAScript programmer using the ECMAScript language. (p.71)</p>
</blockquote>
<p>Therefore, this is the type we generally talk about in JavaScript and the topic we want to discuss in this article.</p>
<p>So how many types are there? According to the specification:</p>
<blockquote>
<p>The ECMAScript language types are Undefined, Null, Boolean, String, Symbol, Number, BigInt, and Object. (p.71)</p>
</blockquote>
<p>So there are 8 types, namely:</p>
<ol>
<li>Undefined</li>
<li>Null</li>
<li>Boolean</li>
<li>String</li>
<li>Symbol</li>
<li>Number</li>
<li>BigInt</li>
<li>Object</li>
</ol>
<p>Some people may count 7 types, excluding the latest BigInt, and some may count 6 types, excluding the Symbol added in ES6. But in any case, the answer is 8 types.</p>
<p>Next, let’s briefly look at how the specification describes these eight types and their basic usage.</p>
<h3><span id="1-undefined">1. Undefined</span></h3><p>The specification describes it as follows:</p>
<blockquote>
<p>The Undefined type has exactly one value, called undefined. Any variable that has not been assigned a value has the value undefined. (p.72)</p>
</blockquote>
<p>Therefore, Undefined is a type, and <code>undefined</code> is a value of the Undefined type, just like “Number is a type, and 9 is a value of the Number type.”.</p>
<p>The Undefined type has only one value, <code>undefined</code>. When a variable is not assigned any value, its value is <code>undefined</code>.</p>
<p>This is easy to verify:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>Using <code>typeof</code> also yields the result <code>&#39;undefined&#39;</code>:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 注意，typeof 的回傳值是字串</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span> <span class="token comment">// hello</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="2-null">2. Null</span></h3><p>The specification describes it more simply:</p>
<blockquote>
<p>The Null type has exactly one value, called null. (p.72)</p>
</blockquote>
<p>Some people may not be able to distinguish between <code>null</code> and <code>undefined</code>, because these two are indeed somewhat similar. At this time, let’s take a look at a classic meme (source: <a target="_blank" rel="noopener" href="https://twitter.com/ddprrt/status/1074955395528040448?lang=zh-Hant">Twitter @ddprrt</a>):</p>
<p><img src="/img/js-type/p1.jpeg" alt="null vs undefined"></p>
<p><code>undefined</code> basically means non-existent, while <code>null</code> means “exists but there is nothing”, giving a feeling of deliberately using <code>null</code> to mark “nothing”.</p>
<p>Also, there is one thing to note, that if you use <code>typeof</code>, you will get the wrong result <code>&#39;object&#39;</code>:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 'object'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>This is one of the most famous bugs in JavaScript. In this article: <a target="_blank" rel="noopener" href="https://2ality.com/2013/10/typeof-null.html">The history of “typeof null”</a>, the author explains why this bug exists and provides actual early JavaScript engine code to support it. JavaScript creator Brendan Eich also left a comment below, correcting some details.</p>
<h3><span id="3-boolean">3. Boolean</span></h3><p>The specification describes it as:</p>
<blockquote>
<p>The Boolean type represents a logical entity having two values, called true and false. (p.72)</p>
</blockquote>
<p>So the value of the Boolean type is either <code>true</code> or <code>false</code>, which everyone should be familiar with, so I won’t go into it.</p>
<h3><span id="4-string">4. String</span></h3><p>The description of String in the specification is relatively long, and we excerpt a section to see:</p>
<blockquote>
<p>The String type is the set of all ordered sequences of zero or more 16-bit unsigned integer values (“elements”) up to a<br>maximum length of 2^53 - 1 elements. The String type is generally used to represent textual data in a running ECMAScript program, in which case each element in the String is treated as a UTF-16 code unit value (p.72)</p>
</blockquote>
<p>Above it says that a string is a sequence of 16-bit numbers, and these numbers are UTF-16 code units. The maximum length of a string is 2^53 - 1.</p>
<p>I believe that many people may still not understand what this means after reading it. There are many things that can be said about UTF-16 and string encoding. I will write another article on this later. For now, we just need to roughly understand the definition of a string.</p>
<h3><span id="5-symbol">5. Symbol</span></h3><p>Next, let’s take a look at Symbol:</p>
<blockquote>
<p>The Symbol type is the set of all non-String values that may be used as the key of an Object property.</p>
<p>Each possible Symbol value is unique and immutable.</p>
<p>Each Symbol value immutably holds an associated value called [[Description]] that is either undefined or a String value. (p.73)</p>
</blockquote>
<p>Symbol is a data type added in ES6. As mentioned above, it is the only thing other than a string that can be used as a key for an object. Each Symbol value is unique.</p>
<p>Let’s look at an example:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token comment">// 可以幫 Symbol 加上敘述以供辨識</span>
<span class="token keyword">var</span> s3 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2 <span class="token operator">===</span> s3<span class="token punctuation">)</span> <span class="token comment">// false，Symbol 是獨一無二的</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span>description<span class="token punctuation">)</span> <span class="token comment">// test 用這個可以取得敘述</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
obj<span class="token punctuation">[</span>s2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'hello'</span> <span class="token comment">// 可以當成 key 使用</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>s2<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// hello</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>In short, Symbol is basically used as a key for objects. Because of its unique characteristics, it will not conflict with other keys.</p>
<p>However, if you want, you can still use <code>Symbol.for()</code> to get the same Symbol, like this:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> s1 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s2<span class="token punctuation">)</span> <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>Why is this possible? When you use the <code>Symbol.for</code> function, it first searches a global Symbol registry to see if the Symbol exists. If it does, it returns it. If not, it creates a new one and writes it to the Symbol registry. Therefore, it doesn’t actually generate the same Symbol, it just helps you find the Symbol that was previously created.</p>
<p>In addition, there is an important feature of hiding information. When you use <code>for in</code>, if the key is of type Symbol, it will not be listed:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">// a</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Knowing these features of Symbol, you may be curious like me, where can Symbol actually be used and how should it be used?</p>
<p>To find the answer to this question, let’s look at a classic practical example: React.</p>
<p>If you have used React, you should be familiar with this syntax:</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>This syntax that mixes JavaScript and HTML is called JSX, and behind it is a Babel plugin that converts the above code to the following:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
      <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token comment">// 標籤</span>
      <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// props</span>
      <span class="token string">'hello'</span> <span class="token comment">// children</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>And <code>React.createElement</code> returns an object like this, which is what we usually call the Virtual DOM:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'hello'</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">_isReactElement</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>So in the end, it’s all JavaScript, nothing special, and React has basic protection against XSS, so unless you use the <code>dangerouslySetInnerHTML</code> attribute (which is intentionally designed to be so long), you cannot insert HTML, for example:</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> text <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>text<span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">"&lt;h1>hello&lt;/h1>"</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>text<span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>body
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>The text you pass in will be placed on the DOM using <code>textContent</code>, so only the plain text <code>&lt;h1&gt;hello&lt;/h1&gt;</code> will appear, not in the form of HTML tags.</p>
<p>Okay, these all look fine, but what if the <code>text</code> in the example above is not text, but an object? For example:</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> text <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>text<span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">dangerouslySetInnerHTML</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">__html</span><span class="token operator">:</span> <span class="token string">'&lt;svg onload="alert(1)">'</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">_isReactElement</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">&#125;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>text<span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>body
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Since <code>React.createElement</code> ultimately returns an object, we can directly convert <code>text</code> into the format that <code>React.createElement</code> returns, it will be treated as a React component, and then we can control its properties and use the <code>dangerouslySetInnerHTML</code> mentioned earlier to insert any value, thereby achieving XSS!</p>
<p>This was the vulnerability in React before v0.14. As long as the attacker can pass an object as a parameter and can control these properties, XSS can be achieved.</p>
<p>You can imagine a situation where a website has a feature to set a nickname. In the part where the nickname is displayed, the website will call an API to render a React component based on the <code>response.data.nickname</code> returned by the API. However, the server has a bug in setting the nickname. Although it should only be able to fill in strings, because there is no type checking, you can set the nickname to an object.</p>
<p>Therefore, if you set the nickname to an object, you can set it as a React component like the example above, and when rendering, it will trigger XSS.</p>
<p>What is the fix? It’s simple, just replace the original <code>_isReactElement</code> with Symbol:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'hello'</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  $$<span class="token keyword">typeof</span><span class="token operator">:</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'react.element'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Why does this work? Because according to the situation we imagined above, when I modify the nickname to an object, no matter what <code>$$typeof</code> is passed, it is not <code>Symbol.for(&#39;react.element&#39;)</code>, because that’s the nature of Symbol. I cannot generate this value from the server.</p>
<p>Unless I can control this object from JavaScript, but if I can control it from JavaScript, it usually means that I can execute any code (for example, I have found an XSS vulnerability).</p>
<p>In this way, React can prevent the attack method we mentioned above. Attackers cannot pretend to be a React component through an object from the server or elsewhere, because they cannot forge Symbol, which is an important part of Symbol in practical use.</p>
<p>Dan’s blog has an article about this, and the content above is also referenced from this blog: <a target="_blank" rel="noopener" href="https://overreacted.io/why-do-react-elements-have-typeof-property/">Why Do React Elements Have a $$typeof Property?</a></p>
<h3><span id="6-number">6. Number</span></h3><p>The spec for Number is also very long, let’s take a look at it briefly:</p>
<blockquote>
<p>The Number type has exactly 18,437,736,874,454,810,627 (that is, 2^64 - 2^53 + 3) values, representing the double-precision 64-bit format IEEE 754-2019 values as specified in the IEEE Standard for Binary Floating-Point Arithmetic, except that the 9,007,199,254,740,990 (that is, 2^53 - 2) distinct “Not-a-Number” values of the IEEE Standard are represented in ECMAScript as a single special NaN value. (p.76)</p>
</blockquote>
<p>It mentions the possible values for the Number type, which has a specific number. This means that this type cannot store all numbers completely, and there will be errors once it exceeds a certain range.</p>
<p>Furthermore, the spec also states that the storage format is “double-precision 64-bit format IEEE 754-2019”, which clearly specifies the standard used for storage. This also shows that the numbers in JS are all 64-bit.</p>
<p>The range mentioned above is a very important part, which can be seen more clearly in the example below:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123456789123456789</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 123456789123456780</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>What! Why is the number still the same after adding one? And why is the printed value not the one we set initially? If you think about it carefully, you will find that it is very reasonable according to the storage mechanism of Number. As mentioned above, Number in JS is a 64-bit number, and 64 bits is a limited space, so the numbers that can be stored are also limited.</p>
<p>This is like the pigeonhole principle. If you have N cages and N+1 pigeons, and you put all the pigeons into the cages, there must be two pigeons in the same cage. The same goes for Number. The storage space is limited, and the numbers are infinite, so you cannot store all numbers accurately, and there will be errors.</p>
<p>Regarding other details, I will write another article specifically discussing numbers later.</p>
<h3><span id="7-bigint">7. BigInt</span></h3><p>BigInt is a type added in ES2020, described as follows:</p>
<blockquote>
<p>The BigInt type represents an integer value. The value may be any size and is not limited to a particular bit-width. (p.85)</p>
</blockquote>
<p>As you can see, there is a very obvious difference between BigInt and Number. Theoretically, BigInt can store numbers without any upper limit. From this, we can roughly guess when to use BigInt and when to use Number.</p>
<p>If we rewrite the example of Number using BigInt, there will be no problem:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123456789123456789n</span> <span class="token comment">// n 代表 BigInt</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1n</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 123456789123456789n</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>This is why we need BigInt. More details will be discussed in another article later.</p>
<h3><span id="8-object">8. Object</span></h3><p>Finally, let’s take a look at our Object. I will excerpt some key points:</p>
<blockquote>
<p>An Object is logically a collection of properties.</p>
<p>Properties are identified using key values. A property key value is either an ECMAScript String value or a Symbol value. All String and Symbol values, including the empty String, are valid as property keys. A property name is a property key that is a String value.</p>
<p>Property keys are used to access properties and their values(p.89)</p>
</blockquote>
<p>An object is a collection of properties, and the “key value” mentioned in the second paragraph is actually the key we often talk about, used to obtain the value of a property. From the spec, we can also see some interesting things, such as the fact that the key of an object must be a string or a symbol. This means that if you use a number as a key, it is actually a string behind the scenes:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
 <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'abc'</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// abc</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// abc</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>And an empty string can also be used as a key, which is valid:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
 <span class="token string-property property">''</span><span class="token operator">:</span> <span class="token number">123</span>
<span class="token punctuation">&#125;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>Objects are a very important concept in JavaScript, so there will be several articles discussing object-related things later.</p>
<p>I believe everyone has heard of a saying that there are two types of data types in JavaScript: primitive data types and objects. Basically, all types except objects are primitive data types.</p>
<p>However, in the ECMAScript spec, the term “primitive data type” does not appear, only “primitive values” appear, for example:</p>
<blockquote>
<p>A primitive value is a member of one of the following built-in types: Undefined, Null, Boolean, Number, BigInt, String, and Symbol; an object is a member of the built-in type Object; (p.49)</p>
</blockquote>
<p>The term “primitive type” does appear, but only once:</p>
<blockquote>
<p>If an object is capable of converting to more than one primitive type, it may use the optional hint preferredType to favour that type (p.112)</p>
</blockquote>
<p>The term “primitive data type” appears most frequently on the Internet in Java, although it does not appear in the JavaScript spec, and “primitive data type” or “primitive type” is not formally defined (only primitive value is formally defined), but it seems reasonable to call the data type that represents primitive value as primitive data type.</p>
<p>Anyway, these are just some terms. I just want to supplement the text in the spec. When using it in daily life, I think it is okay to say primitive data type.</p>
<h2><span id="summary">Summary</span></h2><p>The following are the eight different data types mentioned in the current ECMAScript 2021 spec:</p>
<ol>
<li>Undefined</li>
<li>Null</li>
<li>Boolean</li>
<li>String</li>
<li>Symbol</li>
<li>Number</li>
<li>BigInt</li>
<li>Object</li>
</ol>
<p>I briefly introduced each type and some small knowledge seen from the spec, and made a more complete introduction to the Symbol type.</p>
<p>After reading these, I am curious about a question, that is, when will there be a ninth type? If so, what is most likely to be?</p>
<p>I checked the proposals of <a target="_blank" rel="noopener" href="https://github.com/tc39/proposals">TC39</a> and found that there is currently only one proposal in stage 1 that may add a primitive data type, called <a target="_blank" rel="noopener" href="https://github.com/tc39/proposal-decimal">BigDecimal</a>, which is used to handle decimals, just like the naming in Java.</p>
<p>Although this proposal is still in the early stage, I think it is indeed possible to be adopted in the future. After all, JavaScript currently needs to handle decimals accurately, and it still relies on various third-party libraries, just like handling large numbers in the past. If there is native API support, it would be great, but there is still a long way to go.</p>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/en/tags/JavaScript/">#JavaScript</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2022/03/01/en/susctf-2022-writeup/">SUSCTF 2022 Writeup</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2022/02/14/en/intigriti-0222-author-writeup/">Intigriti 0222 XSS Challenge Author Writeup</a>
            
        </span>
    </div>
    
</article>




<div class="comments">
    <h3 class="title is-4">Comments</h3>
    <script src="https://utteranc.es/client.js"
        repo="aszx87410/huli-blog"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2023 Huli&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow" title="GitHub" target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-minos">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>English</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            <!-- NOTE: 永遠回到首頁 -->
            
                <a href="/2022/02/26/javascript-how-many-types/" class="dropdown-item">
                    繁體中文
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>



    
    
    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js?v=3.js"></script>


    
</body>
</html>